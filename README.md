# Lead Catcher - æ–°è¦æ³•äººæƒ…å ± å–¶æ¥­æ”¯æ´ãƒ„ãƒ¼ãƒ«

![ã‚¢ãƒ—ãƒªã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ](https://placehold.co/800x400/DDE6ED/526D82?text=App+Screenshot)

**Lead Catcher**ã¯ã€å›½ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€Œ[gBizINFO](https://info.gbiz.go.jp/)ã€ã‹ã‚‰æ–°è¦è¨­ç«‹æ³•äººã®æƒ…å ±ã‚’æ¯Žæ—¥è‡ªå‹•ã§å–å¾—ã—ã€å–¶æ¥­æ‹…å½“è€…ãŒåŠ¹çŽ‡çš„ã«æ–°è¦ãƒªãƒ¼ãƒ‰ï¼ˆè¦‹è¾¼ã¿é¡§å®¢ï¼‰ã‚’ç™ºè¦‹ãƒ»ç®¡ç†ã§ãã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

---

## âœ¨ ä¸»ãªæ©Ÿèƒ½

* **ãƒ‡ãƒ¼ã‚¿è‡ªå‹•åŽé›†**: æ¯Žæ—¥AM2:00 (JST)ã«ã€å‰æ—¥åˆ†ã®æ–°è¦è¨­ç«‹æ³•äººæƒ…å ±ã‚’gBizINFOã‹ã‚‰è‡ªå‹•ã§å–å¾—ã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è“„ç©ã—ã¾ã™ã€‚
* **æ³•äººãƒªã‚¹ãƒˆè¡¨ç¤º**: åŽé›†ã—ãŸæ³•äººæƒ…å ±ã‚’ä¸€è¦§ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ï¼‰ã§è¡¨ç¤ºã—ã¾ã™ã€‚
* **åœ°å›³ãƒžãƒƒãƒ”ãƒ³ã‚°æ©Ÿèƒ½**: çµžã‚Šè¾¼ã‚“ã æ³•äººã®æ‰€åœ¨åœ°ã‚’åœ°å›³ä¸Šã«ãƒ”ãƒ³ã§å¯è¦–åŒ–ã—ã¾ã™ã€‚
* **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªçµžã‚Šè¾¼ã¿**: ã€Œéƒ½é“åºœçœŒï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰ã€ã‚„ã€Œè¨­ç«‹æ—¥ã®æœŸé–“ã€ã§ã€è¡¨ç¤ºã™ã‚‹æ³•äººæƒ…å ±ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«çµžã‚Šè¾¼ã‚ã¾ã™ã€‚
* **Dockerã«ã‚ˆã‚‹ç’°å¢ƒæ§‹ç¯‰**: Docker Composeã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€èª°ã®ç’°å¢ƒã§ã‚‚`docker compose up`ã‚³ãƒžãƒ³ãƒ‰ä¸€ã¤ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’ç°¡å˜ã«èµ·å‹•ã§ãã¾ã™ã€‚

---

## ðŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ãƒ¢ãƒ€ãƒ³ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã§æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

* **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Python, FastAPI
* **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Python, Streamlit
* **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL + PostGIS (Docker)
* **ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“**: Docker, Docker Compose
* **ãƒãƒƒãƒå‡¦ç†ã®è‡ªå‹•åŒ–**: GitHub Actions
* **ä¸»ãªPythonãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: Requests, Psycopg2, Pandas

---

## ðŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ä½¿ã„æ–¹

### å¿…è¦ãªã‚‚ã®

* [Docker Desktop](https://www.docker.com/products/docker-desktop/)

### æ‰‹é †

1.  **ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³**
    ```bash
    git clone [https://github.com/ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å/lead-catcher.git](https://github.com/ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å/lead-catcher.git)
    cd lead-catcher
    ```

2.  **`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**
    `batch`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`batch/.env.example`ã¨ã„ã†ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ã‚³ãƒ”ãƒ¼ã—ã¦`batch/.env`ã‚’ä½œæˆã—ã€ã‚ãªãŸã®gBizINFOã®APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚
    ```bash
    cp batch/.env.example batch/.env
    ```
    ã‚¨ãƒ‡ã‚£ã‚¿ã§`batch/.env`ã‚’é–‹ãã€`GBIZINFO_API_KEY`ã®å€¤ã‚’è¨­å®šã—ã¾ã™ã€‚
    ```dotenv
    # batch/.env
    GBIZINFO_API_KEY="ã“ã“ã«ã‚ãªãŸã®APIã‚­ãƒ¼ã‚’è²¼ã‚Šä»˜ã‘"
    ...
    ```

3.  **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•**
    ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã€ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
    ```bash
    docker compose up --build
    ```
    åˆå›žèµ·å‹•æ™‚ã¯ã€å„ã‚µãƒ¼ãƒ“ã‚¹ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒãƒ“ãƒ«ãƒ‰ã•ã‚Œã‚‹ãŸã‚æ•°åˆ†ã‹ã‹ã‚Šã¾ã™ã€‚

4.  **Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹**
    Webãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:8501` ã‚’é–‹ãã¾ã™ã€‚

5.  **ï¼ˆåˆå›žã®ã¿ï¼‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥**
    ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯èµ·å‹•ã—ã¾ã—ãŸãŒã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ã¾ã ç©ºã§ã™ã€‚
    åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã€ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿åŽé›†ãƒãƒƒãƒã‚’æ‰‹å‹•ã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
    ```bash
    docker compose run --rm batch
    ```
    ãƒãƒƒãƒå‡¦ç†ãŒå®Œäº†ã—ãŸã‚‰ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ç”»é¢ã‚’æ›´æ–°ã™ã‚‹ã¨æ³•äººæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

---

## ðŸ›ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ä»¥ä¸‹ã®4ã¤ã®ç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒ†ãƒŠãŒé€£æºã—ã¦å‹•ä½œã—ã¦ã„ã¾ã™ã€‚

```mermaid
graph TD
    subgraph GitHub Actions (æ¯Žæ—¥AM2:00)
        GHA[batchã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•]
    end

    subgraph User's PC (Docker Compose)
        subgraph Services
            Frontend[Frontend (Streamlit)]
            Backend[Backend (FastAPI)]
            Batch[Batch (Python Script)]
            DB[(Database: PostgreSQL)]
        end

        User([User]) -->|1. ã‚¢ã‚¯ã‚»ã‚¹| Frontend
        Frontend -->|2. APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ| Backend
        Backend -->|3. ãƒ‡ãƒ¼ã‚¿å•åˆã›| DB
        DB -->|4. ãƒ‡ãƒ¼ã‚¿å¿œç­”| Backend
        Backend -->|5. JSONå¿œç­”| Frontend
        Frontend -->|6. ç”»é¢è¡¨ç¤º| User

        Batch -->|ãƒ‡ãƒ¼ã‚¿å–å¾—| gBizINFO[gBizINFO API]
        Batch -->|ãƒ‡ãƒ¼ã‚¿ä¿å­˜| DB

        GHA -->|ãƒˆãƒªã‚¬ãƒ¼| Batch
    end

    linkStyle 9 stroke:#ff7878,stroke-width:2px,stroke-dasharray: 5 5;
